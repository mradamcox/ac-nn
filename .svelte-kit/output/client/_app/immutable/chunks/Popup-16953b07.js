import{o as N,C as S,r as M,a as k,u as I,l as B,M as _,b as D,c as A,d as R}from"./_page-4b454c2a.js";const u={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class F extends N{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+S,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(u.ELEMENT,this.handleElementChanged),this.addChangeListener(u.MAP,this.handleMapChanged),this.addChangeListener(u.OFFSET,this.handleOffsetChanged),this.addChangeListener(u.POSITION,this.handlePositionChanged),this.addChangeListener(u.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(u.ELEMENT)}getId(){return this.id}getMap(){return this.get(u.MAP)||null}getOffset(){return this.get(u.OFFSET)}getPosition(){return this.get(u.POSITION)}getPositioning(){return this.get(u.POSITIONING)}handleElementChanged(){M(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(k(this.element),I(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=B(e,_.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(u.ELEMENT,e)}setMap(e){this.set(u.MAP,e)}setOffset(e){this.set(u.OFFSET,e)}setPosition(e){this.set(u.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(u.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),a=this.getElement(),s=this.getRect(a,[D(a),A(a)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!R(n,s)){const f=s[0]-n[0],m=n[2]-s[2],d=s[1]-n[1],p=n[3]-s[3],h=[0,0];if(f<0?h[0]=f-l:m<0&&(h[0]=Math.abs(m)+l),d<0?h[1]=d-l:p<0&&(h[1]=Math.abs(p)+l),h[0]!==0||h[1]!==0){const P=t.getView().getCenterInternal(),v=t.getPixelFromCoordinateInternal(P);if(!v)return;const y=[v[0]+h[0],v[1]+h[1]],E=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(y),duration:E.duration,easing:E.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),a=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[a,s,a+t[0],s+t[1]]}setPositioning(e){this.set(u.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),a=e.getSize();this.updateRenderedPosition(n,a)}updateRenderedPosition(e,t){const n=this.element.style,a=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=Math.round(e[0]+a[0])+"px",f=Math.round(e[1]+a[1])+"px";let m="0%",d="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?m="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(m="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?d="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(d="-50%");const p=`translate(${m}, ${d}) translate(${l}, ${f})`;this.rendered.transform_!=p&&(this.rendered.transform_=p,n.transform=p)}getOptions(){return this.options}}const V=F;window.ol&&ol.ext&&!ol.ext.input&&(ol.ext.input={});var H=class extends N{constructor(e){e=e||{},super();var t=this.input=e.input;t||(t=this.input=document.createElement("INPUT"),e.type&&t.setAttribute("type",e.type),e.min!==void 0&&t.setAttribute("min",e.min),e.max!==void 0&&t.setAttribute("max",e.max),e.step!==void 0&&t.setAttribute("step",e.step),e.parent&&e.parent.appendChild(t)),e.disabled&&(t.disabled=!0),e.checked!==void 0&&(t.checked=!!e.checked),e.val!==void 0&&(t.value=e.val),e.hidden&&(t.style.display="none"),t.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this));var n;t.addEventListener("focusout",function(){this.element&&(n&&clearTimeout(n),n=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,t){var n=function(a){this.moving=!0,this.element.classList.add("ol-moving");var s=function(l){l.type==="pointerup"&&(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",s),document.removeEventListener("pointercancel",s),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),l.target===e&&t(l),l.stopPropagation(),l.preventDefault()}.bind(this);document.addEventListener("pointermove",s,!1),document.addEventListener("pointerup",s,!1),document.addEventListener("pointercancel",s,!1),a.stopPropagation(),a.preventDefault()}.bind(this);e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1)}setValue(e){e!==void 0&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},w=class extends H{constructor(e){e=e||{},super(e);var t=this.element=document.createElement("LABEL");e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html),t.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(document.createElement("SPAN")),e.after&&t.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},$=class extends w{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},W=class extends w{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}},o={};o.create=function(i,e){e=e||{};var t;if(i==="TEXT")t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else{t=document.createElement(i),/button/i.test(i)&&t.setAttribute("type","button");for(var n in e)switch(n){case"className":{e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break}case"text":{t.innerText=e.text;break}case"html":{e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(t);break}case"options":{if(/select/i.test(i))for(var a in e.options)o.create("OPTION",{html:a,value:e.options[a],parent:t});break}case"style":{o.setStyle(t,e.style);break}case"change":case"click":{o.addListener(t,n,e[n]);break}case"on":{for(var s in e.on)o.addListener(t,s,e.on[s]);break}case"checked":{t.checked=!!e.checked;break}default:{t.setAttribute(n,e[n]);break}}}return t};o.createSwitch=function(i){var e=o.create("INPUT",{type:"checkbox",on:i.on,click:i.click,change:i.change,parent:i.parent}),t=Object.assign({input:e},i||{});return new $(t),e};o.createCheck=function(i){var e=o.create("INPUT",{name:i.name,type:i.type==="radio"?"radio":"checkbox",on:i.on,parent:i.parent}),t=Object.assign({input:e},i||{});return i.type==="radio"?new W(t):new w(t),e};o.setHTML=function(i,e){e instanceof Element?i.appendChild(e):e!==void 0&&(i.innerHTML=e)};o.appendText=function(i,e){i.appendChild(document.createTextNode(e||""))};o.addListener=function(i,e,t,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(a){i.addEventListener(a,t,n)})};o.removeListener=function(i,e,t){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(n){i.removeEventListener(n,t)})};o.show=function(i){i.style.display=""};o.hide=function(i){i.style.display="none"};o.hidden=function(i){return o.getStyle(i,"display")==="none"};o.toggle=function(i){i.style.display=i.style.display==="none"?"":"none"};o.setStyle=function(i,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[t]=="number"?i.style[t]=e[t]+"px":i.style[t]=e[t];break}default:i.style[t]=e[t]}};o.getStyle=function(i,e){var t,n=(i.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=n.getComputedStyle(i,null).getPropertyValue(e);else if(i.currentStyle&&(e=e.replace(/-(\w)/g,function(a,s){return s.toUpperCase()}),t=i.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(t)))return function(a){var s=i.style.left,l=i.runtimeStyle.left;return i.runtimeStyle.left=i.currentStyle.left,i.style.left=a||0,a=i.style.pixelLeft+"px",i.style.left=s,i.runtimeStyle.left=l,a}(t);return/px$/.test(t)?parseInt(t):t};o.outerHeight=function(i){return i.offsetHeight+o.getStyle(i,"marginBottom")};o.outerWidth=function(i){return i.offsetWidth+o.getStyle(i,"marginLeft")};o.offsetRect=function(i){var e=i.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};o.getFixedOffset=function(i){var e={left:0,top:0},t=function(n){if(!n)return e;if(o.getStyle(n,"position")==="absolute"&&o.getStyle(n,"transform")!=="none"){var a=n.getBoundingClientRect();return e.left+=a.left,e.top+=a.top,e}return t(n.offsetParent)};return t(i.offsetParent)};o.positionRect=function(i,e){var t=0,n=0,a=function(s){if(s)return t+=s.offsetLeft,n+=s.offsetTop,a(s.offsetParent);var l={top:i.offsetTop+n,left:i.offsetLeft+t};return e&&(l.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),l.bottom=l.top+i.offsetHeight,l.right=l.top+i.offsetWidth,l};return a(i.offsetParent)};o.scrollDiv=function(i,e){e=e||{};var t=!1,n=0,a,s=0,l=typeof e.onmove=="function"?e.onmove:function(){},f=e.vertical?"screenY":"screenX",m=e.vertical?"scrollTop":"scrollLeft",d=!1,p,h,P=0,v=function(){g&&(P++,setTimeout(y))},y=function(){if(g){if(P--,P)return;var r=i.clientHeight,c=i.scrollHeight;p=r/c,g.style.height=p*100+"%",g.style.top=i.scrollTop/c*100+"%",L.style.height=r+"px",r>c-.5?L.classList.add("ol-100pc"):L.classList.remove("ol-100pc")}},E=function(r){r.target.classList.contains("ol-noscroll")||(d=!1,t=r[f],s=new Date,i.classList.add("ol-move"),r.preventDefault(),window.addEventListener("pointermove",C),o.addListener(window,["pointerup","pointercancel"],O))},C=function(r){if(t!==!1){var c=(h?-1/p:1)*(t-r[f]);d=d||Math.round(c),i[m]+=c,a=new Date,a-s&&(n=(n+c/(a-s))/2),t=r[f],s=a,c&&l(!0)}else d=!0},T=function(r){var c=r>0?Math.min(100,r/2):Math.max(-100,r/2);r-=c,i[m]+=c,-1<r&&r<1?(d?setTimeout(function(){i.classList.remove("ol-move")}):i.classList.remove("ol-move"),d=!1,l(!1)):setTimeout(function(){T(r)},40)},L,g;if(e.vertical&&e.minibar){var x=function(r){i.removeEventListener("pointermove",x),i.parentNode.classList.add("ol-miniscroll"),g=o.create("DIV"),L=o.create("DIV",{className:"ol-scroll",html:g}),i.parentNode.insertBefore(L,i),g.addEventListener("pointerdown",function(c){h=!0,E(c)}),e.mousewheel&&(o.addListener(L,["mousewheel","DOMMouseScroll","onmousewheel"],function(c){b(c)}),o.addListener(g,["mousewheel","DOMMouseScroll","onmousewheel"],function(c){b(c)})),i.parentNode.addEventListener("pointerenter",v),window.addEventListener("resize",v),r!==!1&&v()};i.parentNode?x(!1):i.addEventListener("pointermove",x),i.addEventListener("scroll",function(){v()})}i.style["touch-action"]="none",i.style.overflow="hidden",i.classList.add("ol-scrolldiv"),o.addListener(i,["pointerdown"],function(r){h=!1,E(r)}),i.addEventListener("click",function(r){i.classList.contains("ol-move")&&(r.preventDefault(),r.stopPropagation())},!0);var O=function(r){s=new Date-s,s>100||h?n=0:s>0&&(n=((n||0)+(t-r[f])/s)/2),T(e.animate===!1?0:n*200),t=!1,n=0,s=0,i.classList.contains("ol-move")?i.classList.remove("ol-hasClick"):(i.classList.add("ol-hasClick"),setTimeout(function(){i.classList.remove("ol-hasClick")},500)),h=!1,window.removeEventListener("pointermove",C),o.removeListener(window,["pointerup","pointercancel"],O)},b=function(r){var c=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));return i.classList.add("ol-move"),i[m]-=c*30,i.classList.remove("ol-move"),!1};return e.mousewheel&&o.addListener(i,["mousewheel","DOMMouseScroll","onmousewheel"],b),{refresh:v}};o.dispatchEvent=function(i,e){var t;try{t=new CustomEvent(i)}catch{t=document.createEvent("CustomEvent"),t.initCustomEvent(i,!0,!0,{})}e.dispatchEvent(t)};var G=class extends V{constructor(e){e=e||{};var t=document.createElement("div");e.element=t,super(e),typeof e.offsetBox=="number"?this.offsetBox=[e.offsetBox,e.offsetBox,e.offsetBox,e.offsetBox]:this.offsetBox=e.offsetBox,this.closeBox=e.closeBox,this.onclose=e.onclose,this.onshow=e.onshow,o.create("BUTTON",{className:"closeBox"+(e.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:t}),e.anchor!==!1&&o.create("DIV",{className:"anchor",parent:t}),this.content=o.create("DIV",{html:e.html||"",className:"ol-popup-content",parent:t}),e.minibar&&o.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),e.stopEvent&&(t.addEventListener("mousedown",function(n){n.stopPropagation()}),t.addEventListener("touchstart",function(n){n.stopPropagation()})),this._elt=t,this.setPositioning(e.positioning||"auto"),this.setPopupClass(e.popupClass||e.className||"default"),e.anim&&this.addPopupClass("anim"),e.position&&setTimeout(function(){this.show(e.position)}.bind(this))}getClassPositioning(){var e="",t=this.getPositioning();return/bottom/.test(t)&&(e+="ol-popup-bottom "),/top/.test(t)&&(e+="ol-popup-top "),/left/.test(t)&&(e+="ol-popup-left "),/right/.test(t)&&(e+="ol-popup-right "),/^center/.test(t)&&(e+="ol-popup-middle "),/center$/.test(t)&&(e+="ol-popup-center "),e}setClosebox(e){this.closeBox=e,e?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(e){var t=["ol-popup"];this.getVisible()&&t.push("visible"),this.element.className="";var n=this.getClassPositioning().split(" ").filter(function(a){return a.length>0});e?e.split(" ").filter(function(a){return a.length>0}).forEach(function(a){t.push(a)}):t.push("default"),n.forEach(function(a){t.push(a)}),this.closeBox&&t.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,t)}addPopupClass(e){this.element.classList.add(e)}removePopupClass(e){this.element.classList.remove(e)}setPositioning(e){e!==void 0&&(/auto/.test(e)?(this.autoPositioning=e.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,e=e.replace(/auto/g,"center"),e=="center"&&(e="bottom-center"),this.setPositioning_(e))}setPositioning_(e){if(this.element){super.setPositioning(e),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var t=this.getClassPositioning().split(" ").filter(function(n){return n.length>0});this.element.classList.add.apply(this.element.classList,t)}}getVisible(){return this.element.classList.contains("visible")}show(e,t){!t&&typeof e=="string"&&(t=e,e=null),e===!0&&(e=this.getPosition());var n=this,a=this.getMap();if(a&&(t&&t!==this.prevHTML&&(this.prevHTML=t,this.content.innerHTML="",t instanceof Element?this.content.appendChild(t):o.create("DIV",{html:t,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(m){m.addEventListener("load",function(){try{a.renderSync()}catch{}n.content.dispatchEvent(new Event("scroll"))})})),e)){if(this.autoPositioning){var s=a.getPixelFromCoordinate(e),l=a.getSize(),f=[];this.autoPositioning[0]=="auto"?f[0]=s[1]<l[1]/3?"top":"bottom":f[0]=this.autoPositioning[0],f[1]=s[0]<2*l[0]/3?"left":"right",this.setPositioning_(f[0]+"-"+f[1]),this.offsetBox&&this.setOffset([this.offsetBox[f[1]=="left"?2:0],this.offsetBox[f[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(e),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){n.element.classList.add("visible")},0)}}hide(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}};export{G as default};
